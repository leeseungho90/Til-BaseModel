entities:
    futur:          
        processes:          
            birth:  
            #TODO: check why there is some naiss without parents
                - new_born: (naiss != -1) & ( mere != -1) # naiss == period or period/100
                # test que les gens de futur sont bien dans individus
                # - test: if(new_born, -1, fut2pers.men)
                - new('person', filter=new_born,
                      id = id,
                      mere = mere,
                      pere = pere,
                      age = 0,
                      agem = 0,
                      conj = UNSET,
                      civilstate = SINGLE,
                      workstate = STUDENT,
                      sexe = sexe,
                      productivity = 0,
                      sali = 0,
                      rsti = 0,
                      choi = 0,
                      men = -1,
                      quimen = 2,
                      foy = -1,
                      findet = findet,
                      wprm_init = wprm_init,
                      quifoy = 2
                      )
                      
                - new('register', filter=new_born,
                        id=id, sexe=sexe, pere=pere, mere=mere, vivant=True, naiss=period, findet=findet)
                
                # - show('Avg age of "young" mothers', avg(age, filter=new_born and ISFEMALE))
                # - show('Avg age of "young" fathers', avg(l_futconj.age, filter=new_born))
                # - show('Avg age of all mothers', avg(l_futmere.age, filter=l_futmere.fut2pers.age>-1))  #la condition -1 permet de ne prendre que les vraies meres !
                # - show('Avg age of all fathers', avg(l_futpere.age, filter=l_futpere.fut2pers.age>-1 ))  
                # - show('Number of birth', count(age==0))
                
                # Test de la base Destinie qu'on fait là (même si on ne devrait pas forcément...)
                # to correct a bug in Destinie DataBase
                - change_conj: conj != fut2pers.conj
                - conj: if( l_futconj.change_conj and not change_conj, -1, conj)
                